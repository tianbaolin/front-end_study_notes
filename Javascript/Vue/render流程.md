### Render 流程

- 用JavaScript对象模拟DOM
  - 将模版解析成虚拟DOM（js 对象，类似抽象语法树）
- 把此虚拟DOM转成真实DOM并插入页面中
  * 虚拟dom对应的是真实dom， 使用document.CreateElement 和 document.CreateTextNode创建的就是真实节点。
- 如果有事件发生修改了虚拟DOM
  - Render 函数
- 比较两棵虚拟DOM树的差异，得到差异对象
  - **比较只会在同层级进行, 不会跨层级比较。**
  - 同级比较完再比较下一级
  - 比较后会出现四种情况：
    1、此节点是否被移除 -> 添加新的节点 
    2、属性是否被改变 -> 旧属性改为新属性
    3、文本内容被改变-> 旧内容改为新内容
    4、节点要被整个替换 -> 结构完全不相同 移除整个替换
  - diff部分还有一个key的设置，用来表示node是否变化，它可以更高效的利用dom。
- 把差异对象应用到真正的DOM树上
  - 差异对象转化为真实dom
  - 操作dom节点